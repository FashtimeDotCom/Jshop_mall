
<div class="layui-card" style="padding:10px;">
    <div class="layui-tab">
        <ul class="layui-tab-title">
            <li class="layui-this">商户信息</li>
            <li>用户信息</li>
            <li>修改密码</li>
            <li>找回密码</li>
        </ul>
        <div class="layui-tab-content">
            <div class="layui-tab-item layui-show">
                <form class="layui-form" action="" style="padding-top: 20px;font-size: 15px;">
                    <div class="layui-form-item">
                        <label class="layui-form-label">商户名称：</label>
                        <div class="layui-form-mid">{$seller_info['seller_name']}</div>
                    </div>

                    <div class="layui-form-item layui-form-text">
                        <label class="layui-form-label">商户地址：</label>
                        <div class="layui-form-mid">{$seller_info['address']}</div>
                    </div>

                    <div class="layui-form-item layui-form-text">
                        <label class="layui-form-label">店铺类型：</label>
                        {if condition="$store_type eq 1"}
                            <div class="layui-form-mid">共享店铺</div>
                        {else /}
                            <div class="layui-form-mid">独立店铺</div>
                        {/if}
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">商户等级：</label>
                        <div class="layui-form-mid">{$seller_info['level']}</div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">到期时间：</label>
                        <div class="layui-form-mid">{$seller_info['expire_date']}</div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">商户状态：</label>
                        <div class="layui-form-mid">{$seller_info['status']}</div>
                    </div>
                </form>
            </div>
            <div class="layui-tab-item">
                <form class="layui-form" action="" style="padding-top: 20px;">

                    <div class="layui-form-item">
                        <label class="layui-form-label">手机号：</label>
                        <div class="layui-form-mid">{$user_info['mobile']}</div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">用户头像：</label>
                        <div class="layui-input-inline">
                            {Jshop:image name='avatar' value="$user_info['avatar']"}
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">用户昵称：</label>
                        <div class="layui-input-inline">
                            <input type="text" name="nickname" value="{$user_info['nickname']}" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">性别：</label>
                        <input type="radio" name="sex" value="1" {eq name="$user_info.sex" value="1"}checked{/eq} title="男">
                        <input type="radio" name="sex" value="2" {eq name="$user_info.sex" value="2"}checked{/eq} title="女">
                        <input type="radio" name="sex" value="3" {eq name="$user_info.sex" value="3"}checked{/eq} title="待定">
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">生日：</label>
                        <div class="layui-input-inline">
                            <input type="text" id="birthday" name="birthday" value="{$user_info['birthday']}" autocomplete="off" class="layui-input">
                        </div>
                    </div>


                    <div class="layui-form-item">
                        <label class="layui-form-label">账号状态：</label>
                        <div class="layui-form-mid">{$user_info['status']}</div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <button type="button" class="layui-btn" lay-submit lay-filter="userInfo">保存</button>
                        </div>
                    </div>
                </form>
            </div>


            <div class="layui-tab-item">
                <form class="layui-form" action="" style="padding-top: 20px;" id="editForm">

                    <div class="layui-form-item">
                        <label class="layui-form-label">原密码：</label>
                        <div class="layui-input-inline">
                            <input type="password" name="password" required lay-verify="required" placeholder="请输入当前密码" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">新密码：</label>
                        <div class="layui-input-inline">
                            <input type="password" name="newPwd" required lay-verify="required" placeholder="请输入新密码" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">确认密码：</label>
                        <div class="layui-input-inline">
                            <input type="password" name="rePwd" required lay-verify="required" placeholder="确认新密码" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <button type="button" class="layui-btn" lay-submit lay-filter="editPwd">保存</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="layui-tab-item">
                <form class="layui-form" action="" style="padding-top: 20px;" id="backForm">

                    <input type="hidden" name="mobile" value="{$user_info['mobile']}">

                    <div class="layui-form-item">
                        <label class="layui-form-label">手机号：</label>
                        <div class="layui-form-mid">{$user_info['mobile']}</div>
                    </div>

                    <div class="layui-form-item identifying-code">
                        <label class="layui-form-label"><i class="required-color">*</i>验证码：</label>
                        <div class="layui-input-inline">
                            <input type="text" style="width:75px;display: inline-block" name="code" lay-verify="required" autocomplete="off" placeholder="验证码" class="layui-input">
                            <input id="btn" class="layui-btn" type="button" style="width: 110px;" onclick="setSms(this);" value="获取验证码"/>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label"><i class="required-color">*</i>新密码：</label>
                        <div class="layui-input-inline">
                            <input type="password" name="newPwd" required lay-verify="required" placeholder="请输入新密码" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label"><i class="required-color">*</i>确认密码：</label>
                        <div class="layui-input-inline">
                            <input type="password" name="rePwd" required lay-verify="required" placeholder="请输入新密码" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <button type="button" class="layui-btn" lay-submit lay-filter="backPwd">提交</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    layui.use(['form','layer','laydate'],function(){
        var $ = layui.$, form = layui.form, layer = layui.layer,laydate = layui.laydate;
        //修改用户信息
        form.on('submit(userInfo)',function( data ){
           JsPost("{:url('seller/User/editUserInfo')}",data.field,function(res){
               layer.msg( res.msg );
           })
        });
        laydate.render({
            elem: '#birthday' //指定元素
        });

        //修改密码
        form.on('submit(editPwd)',function(data){
            JsPost("{:url('seller/User/editPwd')}",data.field,function(res){
                if ( res.status ) {
                    $("#editForm")[0].reset();
                }
                layer.msg(res.msg);
            })
        });

        //找回密码
        form.on('submit(backPwd)',function(data){
            JsPost("{:url('seller/User/editPwd')}",data.field,function(res) {
                if ( res.status ) {
                    $("#backForm")[0].reset();
                }
                layer.msg(res.msg);
            })
        })

    });

    //发送短信验证码
    function setSms(obj) {
        JsPost("{:url('b2c/common/sms')}",{mobile:"{$user_info['mobile']}",code:'veri'},function(data){
            if(data.status) {
                sms_btn_time($(obj));
            }
            layer.msg(data.msg);
        })
    }

</script>